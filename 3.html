<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>منظومة توقع أسعار السيارات المستعملة</title>
  <!-- <link rel="stylesheet" href="style.css"> -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
    <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            tajawal: ['Tajawal', 'sans-serif']
          },
          animation: {
            'spin-slow': 'spin 1.2s linear infinite',
            'fade-in': 'fadeIn 0.5s ease-in-out',
            'slide-up': 'slideUp 0.3s ease-out',
            'pulse-slow': 'pulse 2s ease-in-out infinite',
            'bounce-slow': 'bounce 2s infinite',
            'fade-out': 'fadeOut 0.5s ease-in-out forwards'
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' }
            },
            slideUp: {
              '0%': { transform: 'translateY(10px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' }
            },
            fadeOut: {
              '0%': { opacity: '1' },
              '100%': { opacity: '0', visibility: 'hidden' }
            },
            bounce: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-10px)' }
            }
          }
        }
      }
    }
  </script>
  <style>
    /* Splash Screen Styles */
    .splash-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: opacity 0.5s ease-out;
    }
    
    .loading-dots {
      display: flex;
      gap: 8px;
      margin-top: 30px;
    }
    
    .loading-dots div {
      width: 10px;
      height: 10px;
      background-color: white;
      border-radius: 50%;
      animation: dotPulse 1.4s ease-in-out infinite;
    }
    
    .loading-dots div:nth-child(2) {
      animation-delay: 0.2s;
    }
    
    .loading-dots div:nth-child(3) {
      animation-delay: 0.4s;
    }
    
    @keyframes dotPulse {
      0%, 100% {
        transform: scale(0.8);
        opacity: 0.5;
      }
      50% {
        transform: scale(1.2);
        opacity: 1;
      }
    }
    
    .progress-ring {
      stroke: #60a5fa;
      stroke-width: 4;
      stroke-linecap: round;
      fill: transparent;
      transform: rotate(-90deg);
      transform-origin: 50% 50%;
    }
    
    .glow-text {
      text-shadow: 0 0 10px rgba(96, 165, 250, 0.5),
                   0 0 20px rgba(96, 165, 250, 0.3),
                   0 0 30px rgba(96, 165, 250, 0.2);
    }
    
    .car-moving {
      animation: moveCar 3s ease-in-out infinite;
    }
    
    @keyframes moveCar {
      0%, 100% {
        transform: translateX(0);
      }
      50% {
        transform: translateX(20px);
      }
    }
    
    .sparkle {
      position: absolute;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 50%;
      animation: sparkle 2s linear infinite;
    }
    
    @keyframes sparkle {
      0%, 100% { opacity: 0; transform: scale(0); }
      50% { opacity: 1; transform: scale(1); }
    }
    
    .road-line {
      width: 60px;
      height: 4px;
      background: white;
      position: absolute;
      animation: roadMove 2s linear infinite;
    }
    
    @keyframes roadMove {
      0% { transform: translateX(-100px); }
      100% { transform: translateX(100px); }
    }
  </style>
</head>

<body class="bg-gradient-to-br from-blue-100 to-bll-600 font-tajawal min-h-screen p-4">
 <!-- ============== SPLASH SCREEN ============== -->
  <div id="splashScreen" class="splash-screen">
    <!-- Animated Background Elements -->
    <div class="absolute inset-0 overflow-hidden">
      <!-- Sparkles -->
      <div class="sparkle" style="top: 20%; left: 15%; width: 8px; height: 8px; animation-delay: 0s;"></div>
      <div class="sparkle" style="top: 40%; right: 20%; width: 6px; height: 6px; animation-delay: 0.5s;"></div>
      <div class="sparkle" style="bottom: 30%; left: 25%; width: 10px; height: 10px; animation-delay: 1s;"></div>
      
      <!-- Road Lines -->
      <div class="road-line" style="bottom: 40%; animation-delay: 0s;"></div>
      <div class="road-line" style="bottom: 40%; animation-delay: 1s;"></div>
    </div>
    
    <!-- Main Content -->
    <div class="text-center relative z-10">
      <!-- Animated Car Icon -->
      <div class="mb-8 relative">
        <div class="car-moving inline-block">
          <div class="relative">
            <div class="w-24 h-12 bg-gradient-to-r from-blue-400 to-blue-500 rounded-lg relative">
              <!-- Car Body -->
              <div class="absolute -top-2 left-2 w-20 h-6 bg-gradient-to-r from-blue-300 to-blue-400 rounded-t-lg"></div>
              <!-- Wheels -->
              <div class="absolute -bottom-2 left-4 w-6 h-6 bg-gray-800 rounded-full border-2 border-gray-900"></div>
              <div class="absolute -bottom-2 right-4 w-6 h-6 bg-gray-800 rounded-full border-2 border-gray-900"></div>
              <!-- Windows -->
              <div class="absolute top-1 left-6 w-16 h-4 bg-blue-200 rounded-sm opacity-60"></div>
            </div>
            <div class="absolute -top-4 left-1/2 transform -translate-x-1/2">
              <i class="fas fa-bolt text-yellow-400 text-xl animate-pulse"></i>
            </div>
          </div>
        </div>
      </div>
      
      <!-- App Name -->
      <h1 class="text-4xl md:text-5xl font-bold text-white mb-4 glow-text">
        <i class="fas fa-car mr-3"></i>
        AutoPrice AI
      </h1>
      
      <p class="text-blue-100 text-lg mb-2">منظومة توقع أسعار السيارات المستعملة</p>
      <p class="text-blue-200 text-sm mb-8">مدعومة بالذكاء الاصطناعي المتقدم</p>
      
      <!-- Loading Ring -->
      <div class="relative w-24 h-24 mx-auto mb-6">
        <svg class="w-24 h-24" viewBox="0 0 100 100">
          <!-- Background Ring -->
          <circle cx="50" cy="50" r="40" stroke="#1e40af" stroke-width="4" fill="transparent" opacity="0.2"/>
          <!-- Animated Ring -->
          <circle cx="50" cy="50" r="40" stroke="#60a5fa" stroke-width="4" fill="transparent" 
                  stroke-dasharray="251.2" stroke-dashoffset="251.2" class="progress-ring">
            <animate attributeName="stroke-dashoffset"
                     from="251.2"
                     to="0"
                     dur="2s"
                     repeatCount="indefinite"/>
          </circle>
        </svg>
        <div class="absolute inset-0 flex items-center justify-center">
          <span class="text-white font-bold text-xl">AI</span>
        </div>
      </div>
      
      <!-- Loading Text -->
      <p class="text-blue-200 mb-6 text-sm">جاري تحميل النظام...</p>
      
      <!-- Loading Dots -->
      <div class="loading-dots">
        <div></div>
        <div></div>
        <div></div>
      </div>
      
      <!-- Progress Bar -->
      <div class="w-64 h-1 bg-blue-800/30 rounded-full mt-8 overflow-hidden">
        <div id="splashProgress" class="h-full bg-gradient-to-r from-blue-400 to-blue-300 rounded-full transition-all duration-300" style="width: 0%"></div>
      </div>
      
      <!-- Loading Info -->
      <div class="mt-6 space-y-1">
        <p id="loadingStep" class="text-blue-300 text-sm">تهيئة قاعدة البيانات...</p>
        <p class="text-blue-400 text-xs">v2.0.1 | Random Forest AI</p>
      </div>
    </div>
  </div>

  <!-- ============== MAIN APP CONTENT ============== -->
  <div class="m-10 max-w-7xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden">

    <!-- Header -->
    <header class="bg-gradient-to-r from-blue-800 to-slate-800 text-white p-6 text-center">
      <h1 class="text-2xl font-bold">منظومة توقع أسعار السيارات المستعملة</h1>
    </header>

    <!-- Main -->
    <main class="grid lg:grid-cols-2 gap-8 p-8">

      <!-- Form -->
      <section class="bg-white rounded-xl border p-6 shadow">
        <h2 class="text-xl font-bold mb-6 text-slate-700 flex items-center gap-2">
          <i class="fas fa-edit text-blue-500"></i> أدخل بيانات السيارة
        </h2>

        <form id="carForm" class="space-y-4">

          <div class="grid grid-cols-1 md:grid-cols-3 gap-6 ">
            <!-- الماركة -->
            <div class="relative">
              <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-1">
                الماركة
              </label>
              <select id="brand" name="brand"
                class="w-full px-4 py-3.5 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200 hover:border-slate-400 appearance-none bg-no-repeat bg-right-4 bg-center"
                required>
                <option value=""> الماركة</option>
                <option value="Acura">Acura</option>
                <option value="Alfa">Alfa</option>
                <option value="Aston">Aston</option>
                <option value="Audi">Audi</option>
                <option value="Bentley">Bentley</option>
                <option value="BMW">BMW</option>
                <option value="Buick">Buick</option>
                <option value="Cadillac">Cadillac</option>
                <option value="Chevrolet">Chevrolet</option>
                <option value="Chrysler">Chrysler</option>
                <option value="Dodge">Dodge</option>
                <option value="Ferrari">Ferrari</option>
                <option value="FIAT">FIAT</option>
                <option value="Ford">Ford</option>
                <option value="Genesis">Genesis</option>
                <option value="GMC">GMC</option>
                <option value="Honda">Honda</option>
                <option value="Hummer">Hummer</option>
                <option value="Hyundai">Hyundai</option>
                <option value="INFINITI">INFINITI</option>
                <option value="Jaguar">Jaguar</option>
                <option value="Jeep">Jeep</option>
                <option value="Karma">Karma</option>
                <option value="Kia">Kia</option>
                <option value="Land">Land</option>
                <option value="Lamborghini">Lamborghini</option>
                <option value="Lexus">Lexus</option>
                <option value="Lincoln">Lincoln</option>
                <option value="Lotus">Lotus</option>
                <option value="Lucid">Lucid</option>
                <option value="Maserati">Maserati</option>
                <option value="Maybach">Maybach</option>
                <option value="Mazda">Mazda</option>
                <option value="McLaren">McLaren</option>
                <option value="Mercedes-Benz">Mercedes-Benz</option>
                <option value="Mercury">Mercury</option>
                <option value="MINI">MINI</option>
                <option value="Mitsubishi">Mitsubishi</option>
                <option value="Nissan">Nissan</option>
                <option value="Plymouth">Plymouth</option>
                <option value="Polestar">Polestar</option>
                <option value="Pontiac">Pontiac</option>
                <option value="Porsche">Porsche</option>
                <option value="RAM">RAM</option>
                <option value="Rivian">Rivian</option>
                <option value="Rolls-Royce">Rolls-Royce</option>
                <option value="Saab">Saab</option>
                <option value="Scion">Scion</option>
                <option value="smart">smart</option>
                <option value="Subaru">Subaru</option>
                <option value="Suzuki">Suzuki</option>
                <option value="Tesla">Tesla</option>
                <option value="Toyota">Toyota</option>
                <option value="Volkswagen">Volkswagen</option>
                <option value="Volvo">Volvo</option>
              </select>
              <div class="absolute left-3 top-1/2 transform translate-y-1 pointer-events-none text-slate-500">
                <i class="fas fa-chevron-down"></i>
              </div>
            </div>

            <!-- سنة الصنع + المسافة -->
            <div class="md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label for="model_year" class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-1">
                  سنة الصنع
                </label>
                <input id="model_year" type="number" value="2010" min="1990" max="2025"
                  class="w-full px-4 py-3.5 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200 hover:border-slate-400"
                  placeholder="مثال: 2020" />
              </div>
              <div>
                <label for="milage" class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-1">
                  المسافة المقطوعة (ميل)
                </label>
                <input id="milage" type="number" min="0" value="50000" placeholder="مثال: 50000"
                  class="w-full px-4 py-3.5 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200 hover:border-slate-400" />
              </div>
            </div>
          </div>

          <!-- Engine Specifications -->
          <!-- engine_hp -->
          <div class="grid md:grid-cols-3 gap-6">
            <div>
              <label for="engine_hp" class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-1">قوة
                المحرك (حصان)</label>
              <input id="engine_hp" type="number" min="50" max="1200" step="10" value="150"
                class="w-full px-4 py-3.5 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200 hover:border-slate-400"
                placeholder="مثال: 150" required />
            </div>
            <div class="relative">
              <label for="cylinders" class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-1">
                عدد الأسطوانات</label>
              <select id="cylinders"
                class="w-full px-4 py-3.5 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200 hover:border-slate-400 appearance-none bg-no-repeat bg-right-4 bg-center"
                required>
                <option value="" disabled selected>عدد الاسطوانات</option>
                <option value="3">3 cylinders</option>
                <option value="4">4 cylinders</option>
                <option value="5">5 cylinders</option>
                <option value="6">6 cylinders</option>
                <option value="8">8 cylinders</option>
                <option value="10">10 cylinders</option>
                <option value="12">12 cylinders</option>
              </select>
              <div class="absolute left-3 top-1/2 transform translate-y-1 pointer-events-none text-slate-500">
                <i class="fas fa-chevron-down"></i>
              </div>
            </div>

            <div>
              <label for="engine_liters"
                class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-1">

                سعة المحرك
                (لتر)</label>
              <input id="engine_liters" type="number" min="0" step="0.1" value="2.0"
                class="w-full px-4 py-3.5 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200 hover:border-slate-400"
                placeholder="مثال: 2.0" required />
            </div>
          </div>

          <!-- الوقود + ناقل الحركة + الحوادث -->
          <div class=" relative grid md:grid-cols-3 gap-6">
            <div class="relative">
              <label for="fuel_type" class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-1">
                نوع الوقود</label>
              <select id="fuel_type"
                class="w-full px-4 py-3.5 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200 hover:border-slate-400 appearance-none bg-no-repeat bg-right-4 bg-center"
                required>
                <option value="" disabled selected> نوع الوقود</option>
                <option value="Gasoline">بنزين</option>
                <option value="Diesel">ديزل</option>
                <option value="Hybrid">هايبرد</option>
                <option value="Electric">كهربائية</option>
                <option value="Plug-In Hybrid">هايبرد (قابل للشحن)</option>
                <option value="E85 Flex Fuel">E85 (مرن)</option>
                <option value="Unknown">غير معروف</option>
              </select>
              <div class="absolute left-3 top-1/2 transform translate-y-1 pointer-events-none text-slate-500">
                <i class="fas fa-chevron-down"></i>
              </div>
            </div>


            <div class="relative">
              <label for="transmission" class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-1">
                ناقل الحركة
              </label>
              <select id="transmission"
                class="w-full px-4 py-3.5 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200 hover:border-slate-400 appearance-none bg-no-repeat bg-right-4 bg-center"
                required>
                <option value="" disabled selected> ناقل الحركة</option>

                <optgroup label="أوتوماتيكي">
                  <option value="A/T">A/T (أوتوماتيكي)</option>
                  <option value="Automatic">أوتوماتيكي</option>
                  <option value="6-Speed A/T">أوتوماتيكي 6 سرعات</option>
                  <option value="8-Speed A/T">أوتوماتيكي 8 سرعات</option>
                  <option value="7-Speed A/T">أوتوماتيكي 7 سرعات</option>
                  <option value="9-Speed A/T">أوتوماتيكي 9 سرعات</option>
                  <option value="10-Speed A/T">أوتوماتيكي 10 سرعات</option>
                  <option value="5-Speed A/T">أوتوماتيكي 5 سرعات</option>
                  <option value="4-Speed A/T">أوتوماتيكي 4 سرعات</option>
                </optgroup>

                <optgroup label="يدوي">
                  <option value="M/T">M/T (يدوي)</option>
                  <option value="Manual">يدوي</option>
                  <option value="6-Speed M/T">يدوي 6 سرعات</option>
                  <option value="5-Speed M/T">يدوي 5 سرعات</option>
                  <option value="7-Speed M/T">يدوي 7 سرعات</option>
                </optgroup>

                <optgroup label="">
                  <option value="CVT Transmission">CVT (متغير)</option>
                  <option value="Automatic CVT">أوتوماتيكي CVT</option>
                  <option value="Single-Speed Fixed Gear">ثابت السرعة (كهربائي)</option>
                  <option value="1-Speed A/T">أوتوماتيكي سرعة واحدة</option>
                  <option value="1-Speed Automatic">أوتوماتيكي سرعة واحدة</option>
                  <option value="Variable">متغير</option>
                </optgroup>

                <optgroup label="">
                  <option value="Transmission w/Dual Shift Mode">بخاصية التحول المزدوج</option>
                  <option value="8-Speed Automatic with Auto-Shift">أوتوماتيكي 8 سرعات مع تحول تلقائي</option>
                  <option value="7-Speed Automatic with Auto-Shift">أوتوماتيكي 7 سرعات مع تحول تلقائي</option>
                  <option value="6-Speed Automatic with Auto-Shift">أوتوماتيكي 6 سرعات مع تحول تلقائي</option>
                  <option value="Automatic, 8-Spd PDK Dual-Clutch">PDK دبل كلتش (بورش)</option>
                </optgroup>
              </select>
              <div class="absolute left-3 top-1/2 transform translate-y-1 pointer-events-none text-slate-500">
                <i class="fas fa-chevron-down"></i>
              </div>
            </div>
            <div class="relative">
              <label for="accident" class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-1">
                حالة الحوادث
              </label>
              <select id="accident"
                class="w-full px-4 py-3.5 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200 hover:border-slate-400 appearance-none bg-no-repeat bg-right-4 bg-center"
                required>
                <option value="" disabled selected>حالة الحوادث</option>
                <option value="None reported">لا يوجد حوادث</option>
                <option value="At least 1 accident or damage reported">حادث أو ضرر مسجل</option>
              </select>
              <div class="absolute left-3 top-1/2 transform translate-y-1 pointer-events-none text-slate-500">
                <i class="fas fa-chevron-down"></i>
              </div>
            </div>
          </div>

            <!-- Turbo + Hybrid -->
                    <div
                        class="flex gap-8 mt-6 p-5 bg-gradient-to-r from-slate-50 to-blue-50 rounded-2xl border border-slate-200">
                        <!-- Turbo -->
                        <label class="flex items-center gap-3 cursor-pointer group">
                            <div class="relative">
                                <input id="has_turbo" type="checkbox"
                                    class="w-6 h-6 rounded border-slate-300 text-blue-600 focus:ring-blue-500 focus:ring-offset-0 accent-blue-600">
                                <div
                                    class="absolute inset-0 bg-blue-100 rounded opacity-0 group-hover:opacity-20 transition-opacity duration-200">
                                </div>
                            </div>
                            <span class="flex items-center gap-2 font-medium text-slate-700">
                                <span class="font-semibold">توربو</span>
                            </span>
                        </label>

                        <!-- Hybrid/Electric -->
                        <label class="flex items-center gap-3 cursor-pointer group">
                            <div class="relative">
                                <input id="is_hybrid_electric" type="checkbox"
                                    class="w-6 h-6 rounded border-slate-300 text-green-600 focus:ring-green-500 focus:ring-offset-0 accent-purple-600">
                                <div
                                    class="absolute inset-0 bg-green-100 rounded opacity-0 group-hover:opacity-20 transition-opacity duration-200">
                                </div>
                            </div>
                            <span class="flex items-center gap-2 font-medium text-slate-700">
                                <span class="font-semibold">هايبرد / كهربائي</span>
                            </span>
                        </label>
                    </div>

                    <!-- Buttons -->
                    <div class="flex flex-col sm:flex-row gap-4 mt-8">
                        <!-- Predict Button -->
                        <button type="submit"
                            class="flex-1 bg-gradient-to-r from-blue-800 to-slate-700 hover:from-blue-900 hover:to-slate-950 text-white py-4 rounded-xl font-bold  flex items-center justify-center gap-3 group">
                            <i class="fas fa-car "></i>
                            <span class="text-lg">توقع السعر</span>
                        </button>

                        <!-- Reset Button -->
                        <button type="button" onclick="resetForm()"
                            class="flex-1 bg-gradient-to-r from-slate-100 to-slate-200 hover:from-slate-200 hover:to-slate-300 text-slate-700 py-4 rounded-xl font-bold transition-all duration-300 border border-slate-300 hover:border-slate-400 flex items-center justify-center gap-3">
                            <i class="fas fa-redo"></i>
                            <span>إعادة تعيين</span>
                        </button>
                    </div>

                </form>
            </section>

            

      <!-- Result -->
      <section class="bg-white rounded-xl border p-6 shadow">
        <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
          النتيجة
        </h2>

        <div id="loading" class="hidden text-center py-10">
          <i class="fas fa-spinner fa-spin text-3xl text-blue-500"></i>
          <p class="mt-3">جاري الحساب...</p>
        </div>

        <div id="predictionResult" class="hidden">
          <div class="bg-slate-100 border-2 border-blue-500 rounded-xl p-6 mb-6">
            <div id="priceValue" class="text-4xl font-bold text-green-600">$0</div>
            <p class="text-slate-600">دولار أمريكي</p>
            <div class="mt-2 text-sm text-slate-500">
              <i class="fas fa-info-circle"></i>
              <span id="priceNote">سعر تقديري بناءً على بيانات السوق</span>
            </div>
          </div>

          <!-- <div class="space-y-3 text-right bg-blue-50 p-4 rounded-lg">
            <h3 class="font-bold text-slate-700 mb-2">تفاصيل السيارة المدخلة:</h3>
            <div class="grid grid-cols-2 gap-3">
              <div><strong>الماركة:</strong> <span id="detailBrand" class="text-blue-700"></span></div>
              <div><strong>سنة الصنع:</strong> <span id="detailYear" class="text-blue-700"></span></div>
              <div><strong>المسافة:</strong> <span id="detailMilage" class="text-blue-700"></span></div>
              <div><strong>قوة المحرك:</strong> <span id="detailHp" class="text-blue-700"></span> حصان</div>
              <div><strong>عدد الأسطوانات:</strong> <span id="detailCylinders" class="text-blue-700"></span></div>
              <div><strong>نوع الوقود:</strong> <span id="detailFuel" class="text-blue-700"></span></div>
            </div>
          </div> -->
        </div>
        <div id="errorMessage" class="hidden bg-red-100 text-red-700 p-4 rounded mt-4 text-center">
          حدث خطأ أثناء التوقع
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gradient-to-r from-blue-800 to-slate-800 text-white p-6 text-center">
      © 2025 – تم التطوير بواسطة جنان

    </footer>
  </div>

  <!-- ================= JS ================= -->
<!-- ================= JS ================= -->
  <script>
    // التحكم في Splash Screen
    document.addEventListener('DOMContentLoaded', function() {
      const splashScreen = document.getElementById('splashScreen');
      const mainContent = document.getElementById('mainContent');
      const splashProgress = document.getElementById('splashProgress');
      const loadingStep = document.getElementById('loadingStep');
      
      // محاكاة عملية التحميل
      const loadingSteps = [
        { text: "تهيئة قاعدة البيانات...", progress: 15 },
        { text: "تحميل نماذج الذكاء الاصطناعي...", progress: 35 },
        { text: "جاري تحميل واجهة المستخدم...", progress: 60 },
        { text: "تهيئة نظام التوقع...", progress: 85 },
        { text: "جاهز للاستخدام!", progress: 100 }
      ];
      
      let currentStep = 0;
      
      function simulateLoading() {
        if (currentStep < loadingSteps.length) {
          const step = loadingSteps[currentStep];
          loadingStep.textContent = step.text;
          splashProgress.style.width = step.progress + '%';
          
          currentStep++;
          
          // سرعة مختلفة لكل خطوة
          const delay = currentStep === loadingSteps.length ? 800 : 500 + Math.random() * 300;
          setTimeout(simulateLoading, delay);
        } else {
          // إخفاء Splash Screen بعد اكتمال التحميل
          setTimeout(() => {
            splashScreen.classList.add('animate-fade-out');
            setTimeout(() => {
              splashScreen.style.display = 'none';
              mainContent.classList.remove('hidden');
              mainContent.classList.add('animate-fade-in');
            }, 500);
          }, 300);
        }
      }
      
      // بدء محاكاة التحميل بعد تأخير بسيط
      setTimeout(simulateLoading, 500);
    });
    const API_URL = "http://127.0.0.1:8000";

    const form = document.getElementById("carForm");
    const loading = document.getElementById("loading");
    const result = document.getElementById("predictionResult");
    const errorBox = document.getElementById("errorMessage");

    form.addEventListener("submit", async e => {
      e.preventDefault();
      loading.classList.remove("hidden");
      result.classList.add("hidden");
      errorBox.classList.add("hidden");

      // تحويل القيم للأرقام
      const hp = Number(engine_hp.value);
      const year = Number(model_year.value);
      const mil = Number(milage.value);
      const liters = Number(engine_liters.value);

      // التحقق من صحة القيم
      if (isNaN(hp) || hp < 50 || hp > 1500) {
        alert("الرجاء إدخال قيمة قوة المحرك بين 50 و1500 حصان");
        loading.classList.add("hidden");
        return;
      }

      if (isNaN(year) || year < 1990 || year > 2024) {
        alert("الرجاء إدخال سنة تصنيع بين 1990 و2024");
        loading.classList.add("hidden");
        return;
      }

      if (isNaN(mil) || mil < 0) {
        alert("المسافة المقطوعة يجب أن تكون صفر أو أكثر");
        loading.classList.add("hidden");
        return;
      }

      if (isNaN(liters) || liters <= 0) {
        alert("سعة المحرك يجب أن تكون أكبر من صفر");
        loading.classList.add("hidden");
        return;
      }

      // تجهيز البيانات للإرسال
      const data = {
        brand: brand.value,
        model_year: year,
        milage: mil,
        engine_hp: hp,
        cylinders: Number(cylinders.value),
        engine_liters: liters,
        fuel_type: fuel_type.value,
        transmission: transmission.value,
        accident: accident.value,
        has_turbo: has_turbo.checked ? 1 : 0,
        is_hybrid_electric: is_hybrid_electric.checked ? 1 : 0,
      };

      try {
        const res = await fetch(`${API_URL}/predict`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });

        const json = await res.json();
        console.log(data);

        priceValue.textContent = `$${json.predicted_price.toFixed(2)}`;
        // detailBrand.textContent = data.brand;
        // detailYear.textContent = data.model_year;
        // detailMilage.textContent = data.milage + " ميل";
        // detailHp.textContent = data.engine_hp;
        // engine_liters.textContent = data.engine_liters;
        // detailCylinders.textContent = data.cylinders;
        // detailFuel.textContent = data.fuel_type;

        result.classList.remove("hidden");
      } catch (error) {
        console.error("❌ خطأ في الاتصال:", error);
        errorBox.innerHTML = `
        <i class="fas fa-exclamation-triangle"></i>
        <strong>حدث خطأ أثناء التوقع</strong>
        <p class="text-sm mt-1">${error.message || "يرجى التحقق من اتصال الإنترنت وإعادة المحاولة"}</p>
    `;
        errorBox.classList.remove("hidden");
      } finally {
        loading.classList.add("hidden");
      }
    });

    function resetForm() {
      form.reset();
      result.classList.add("hidden");
    }
  </script>


  <style>
    .input {
      @apply border rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-400;
    }
  </style>

</body>

</html>