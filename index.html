<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="description" content="نظام توقع أسعار السيارات المستعملة باستخدام الذكاء الاصطناعي - أدخل بيانات السيارة واحصل على السعر المتوقع فوراً">
<meta name="keywords" content="سيارات, أسعار, توقع, ذكاء اصطناعي, مستعمل">
<meta name="author" content="جنان">
<meta property="og:title" content="منظومة توقع أسعار السيارات">
<meta property="og:description" content="توقع دقيق لأسعار السيارات المستعملة">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://cdnjs.cloudflare.com/ajax/libs">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>منظومة توقع أسعار السيارات المستعملة</title>
  <!-- <link rel="stylesheet" href="style.css"> -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            tajawal: ['Tajawal', 'sans-serif']
          },
          animation: {
            'spin-slow': 'spin 1.2s linear infinite',
            'fade-in': 'fadeIn 0.5s ease-in-out',
            'slide-up': 'slideUp 0.3s ease-out'
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' }
            },
            slideUp: {
              '0%': { transform: 'translateY(10px)', opacity: '0' },
              '100%': { transform: 'translateY(0)', opacity: '1' }
            }
          }
        }
        
      }
      
    }
  </script>
  
</head>

<body class="bg-gradient-to-br from-blue-100 to-bll-600 font-tajawal min-h-screen p-2">

  <div class="m-4 max-w-7xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden">

    <!-- Header -->
    <header class="bg-gradient-to-r from-blue-800 to-slate-800 text-white p-6 text-center">
      <h1 class="text-2xl font-bold">منظومة توقع أسعار السيارات المستعملة</h1>
    </header>

    <!-- Main -->
    <main class="grid lg:grid-cols-2 gap-8 p-8">

      <!-- Form -->
      <section class="bg-white rounded-xl border p-6 shadow">
        <h2 class="text-xl font-bold mb-6 text-slate-700 flex items-center gap-2">
          <i class="fas fa-edit text-blue-500"></i> أدخل بيانات السيارة
        </h2>

        <form id="carForm" class="space-y-4">

          <div class="grid grid-cols-1 md:grid-cols-3 gap-6 ">
            <!-- الماركة -->
            <div class="relative">
              <label class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-1">
                الماركة
              </label>
              <select id="brand" name="brand"
                class="w-full px-4 py-2 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200 hover:border-slate-400 appearance-none bg-no-repeat bg-right-4 bg-center"
                required>
                <option value=""> الماركة</option>
                <option value="Acura">Acura</option>
                <option value="Alfa">Alfa</option>
                <option value="Aston">Aston</option>
                <option value="Audi">Audi</option>
                <option value="Bentley">Bentley</option>
                <option value="BMW">BMW</option>
                <option value="Buick">Buick</option>
                <option value="Cadillac">Cadillac</option>
                <option value="Chevrolet">Chevrolet</option>
                <option value="Chrysler">Chrysler</option>
                <option value="Dodge">Dodge</option>
                <option value="Ferrari">Ferrari</option>
                <option value="FIAT">FIAT</option>
                <option value="Ford">Ford</option>
                <option value="Genesis">Genesis</option>
                <option value="GMC">GMC</option>
                <option value="Honda">Honda</option>
                <option value="Hummer">Hummer</option>
                <option value="Hyundai">Hyundai</option>
                <option value="INFINITI">INFINITI</option>
                <option value="Jaguar">Jaguar</option>
                <option value="Jeep">Jeep</option>
                <option value="Karma">Karma</option>
                <option value="Kia">Kia</option>
                <option value="Land">Land</option>
                <option value="Lamborghini">Lamborghini</option>
                <option value="Lexus">Lexus</option>
                <option value="Lincoln">Lincoln</option>
                <option value="Lotus">Lotus</option>
                <option value="Lucid">Lucid</option>
                <option value="Maserati">Maserati</option>
                <option value="Maybach">Maybach</option>
                <option value="Mazda">Mazda</option>
                <option value="McLaren">McLaren</option>
                <option value="Mercedes-Benz">Mercedes-Benz</option>
                <option value="Mercury">Mercury</option>
                <option value="MINI">MINI</option>
                <option value="Mitsubishi">Mitsubishi</option>
                <option value="Nissan">Nissan</option>
                <option value="Plymouth">Plymouth</option>
                <option value="Polestar">Polestar</option>
                <option value="Pontiac">Pontiac</option>
                <option value="Porsche">Porsche</option>
                <option value="RAM">RAM</option>
                <option value="Rivian">Rivian</option>
                <option value="Rolls-Royce">Rolls-Royce</option>
                <option value="Saab">Saab</option>
                <option value="Scion">Scion</option>
                <option value="smart">smart</option>
                <option value="Subaru">Subaru</option>
                <option value="Suzuki">Suzuki</option>
                <option value="Tesla">Tesla</option>
                <option value="Toyota">Toyota</option>
                <option value="Volkswagen">Volkswagen</option>
                <option value="Volvo">Volvo</option>
              </select>
              <div class="absolute left-3 top-1/2 transform   pointer-events-none text-slate-500">
                <i class="fas fa-chevron-down"></i>
              </div>
            </div>

            <!-- سنة الصنع + المسافة -->
            <div class="md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label for="model_year" class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-1">
                  سنة الصنع
                </label>
                <input id="model_year" type="number" value="2010" min="1990" max="2025"
                  class="w-full px-4 py-2 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200 hover:border-slate-400"
                  placeholder="مثال: 2020" />
              </div>
              <div>
                <label for="milage" class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-1">
                  المسافة المقطوعة (ميل)
                </label>
                <input id="milage" type="number" min="0" value="50000" placeholder="مثال: 50000"
                  class="w-full px-4 py-2 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200 hover:border-slate-400" />
              </div>
            </div>
          </div>

          <!-- Engine Specifications -->
          <!-- engine_hp -->
          <div class="grid md:grid-cols-3 gap-6">
            <div>
              <label for="engine_hp" class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-1">قوة
                المحرك (حصان)</label>
              <input id="engine_hp" type="number" min="50" max="1200" step="10" value="150"
                class="w-full px-4 py-2 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200 hover:border-slate-400"
                placeholder="مثال: 150" required />
            </div>
            <div class="relative">
              <label for="cylinders" class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-1">
                عدد الأسطوانات</label>
              <select id="cylinders"
                class="w-full px-4 py-2 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200 hover:border-slate-400 appearance-none bg-no-repeat bg-right-4 bg-center"
                required>
                <option value="" disabled selected>عدد الاسطوانات</option>
                <option value="3">3 cylinders</option>
                <option value="4">4 cylinders</option>
                <option value="5">5 cylinders</option>
                <option value="6">6 cylinders</option>
                <option value="8">8 cylinders</option>
                <option value="10">10 cylinders</option>
                <option value="12">12 cylinders</option>
              </select>
              <div class="absolute left-3 top-1/2 transform pointer-events-none text-slate-500">
                <i class="fas fa-chevron-down"></i>
              </div>
            </div>

            <div>
              <label for="engine_liters"
                class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-1">

                سعة المحرك
                (لتر)</label>
              <input id="engine_liters" type="number" min="0" step="0.1" value="2.0"
                class="w-full px-4 py-2 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200 hover:border-slate-400"
                placeholder="مثال: 2.0" required />
            </div>
          </div>

          <!-- الوقود + ناقل الحركة + الحوادث -->
          <div class=" relative grid md:grid-cols-3 gap-6">
            <div class="relative">
              <label for="fuel_type" class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-1">
                نوع الوقود</label>
              <select id="fuel_type"
                class="w-full px-4 py-2 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200 hover:border-slate-400 appearance-none bg-no-repeat bg-right-4 bg-center"
                required>
                <option value="" disabled selected> نوع الوقود</option>
                <option value="Gasoline">بنزين</option>
                <option value="Diesel">ديزل</option>
                <option value="Hybrid">هايبرد</option>
                <option value="Electric">كهربائية</option>
                <option value="Plug-In Hybrid">هايبرد (قابل للشحن)</option>
                <option value="E85 Flex Fuel">E85 (مرن)</option>
                <option value="Unknown">غير معروف</option>
              </select>
              <div class="absolute left-3 top-1/2 transform pointer-events-none text-slate-500">
                <i class="fas fa-chevron-down"></i>
              </div>
            </div>


            <div class="relative">
              <label for="transmission" class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-1">
                ناقل الحركة
              </label>
              <select id="transmission"
                class="w-full px-4 py-2 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200 hover:border-slate-400 appearance-none bg-no-repeat bg-right-4 bg-center"
                required>
                <option value="" disabled selected> ناقل الحركة</option>

                <optgroup label="أوتوماتيكي">
                  <option value="A/T">A/T (أوتوماتيكي)</option>
                  <option value="Automatic">أوتوماتيكي</option>
                  <option value="6-Speed A/T">أوتوماتيكي 6 سرعات</option>
                  <option value="8-Speed A/T">أوتوماتيكي 8 سرعات</option>
                  <option value="7-Speed A/T">أوتوماتيكي 7 سرعات</option>
                  <option value="9-Speed A/T">أوتوماتيكي 9 سرعات</option>
                  <option value="10-Speed A/T">أوتوماتيكي 10 سرعات</option>
                  <option value="5-Speed A/T">أوتوماتيكي 5 سرعات</option>
                  <option value="4-Speed A/T">أوتوماتيكي 4 سرعات</option>
                </optgroup>

                <optgroup label="يدوي">
                  <option value="M/T">M/T (يدوي)</option>
                  <option value="Manual">يدوي</option>
                  <option value="6-Speed M/T">يدوي 6 سرعات</option>
                  <option value="5-Speed M/T">يدوي 5 سرعات</option>
                  <option value="7-Speed M/T">يدوي 7 سرعات</option>
                </optgroup>

                <optgroup label="">
                  <option value="CVT Transmission">CVT (متغير)</option>
                  <option value="Automatic CVT">أوتوماتيكي CVT</option>
                  <option value="Single-Speed Fixed Gear">ثابت السرعة (كهربائي)</option>
                  <option value="1-Speed A/T">أوتوماتيكي سرعة واحدة</option>
                  <option value="1-Speed Automatic">أوتوماتيكي سرعة واحدة</option>
                  <option value="Variable">متغير</option>
                </optgroup>

                <optgroup label="">
                  <option value="Transmission w/Dual Shift Mode">بخاصية التحول المزدوج</option>
                  <option value="8-Speed Automatic with Auto-Shift">أوتوماتيكي 8 سرعات مع تحول تلقائي</option>
                  <option value="7-Speed Automatic with Auto-Shift">أوتوماتيكي 7 سرعات مع تحول تلقائي</option>
                  <option value="6-Speed Automatic with Auto-Shift">أوتوماتيكي 6 سرعات مع تحول تلقائي</option>
                  <option value="Automatic, 8-Spd PDK Dual-Clutch">PDK دبل كلتش (بورش)</option>
                </optgroup>
              </select>
              <div class="absolute left-3 top-1/2 transform   pointer-events-none text-slate-500">
                <i class="fas fa-chevron-down"></i>
              </div>
            </div>
            <div class="relative">
              <label for="accident" class="block text-sm font-semibold text-slate-700 mb-2 flex items-center gap-1">
                حالة الحوادث
              </label>
              <select id="accident"
                class="w-full px-4 py-2 border border-slate-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-200 hover:border-slate-400 appearance-none bg-no-repeat bg-right-4 bg-center"
                required>
                <option value="" disabled selected>حالة الحوادث</option>
                <option value="None reported">لا يوجد حوادث</option>
                <option value="At least 1 accident or damage reported">حادث أو ضرر مسجل</option>
              </select>
              <div class="absolute left-3 top-1/2 transform  pointer-events-none text-slate-500">
                <i class="fas fa-chevron-down"></i>
              </div>
            </div>
          </div>

            <!-- Turbo + Hybrid -->
                    <div
                        class="flex gap-8 mt-6 p-4 bg-gradient-to-r from-slate-50 to-blue-50 rounded-2xl border border-slate-200">
                        <!-- Turbo -->
                        <label class="flex items-center gap-3 cursor-pointer group">
                            <div class="relative">
                                <input id="has_turbo" type="checkbox"
                                    class="w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500 focus:ring-offset-0 accent-blue-600">
                                <div
                                    class="absolute inset-0 bg-blue-100 rounded opacity-0 group-hover:opacity-20 transition-opacity duration-200">
                                </div>
                            </div>
                            <span class="flex items-center gap-2 font-medium text-slate-700">
                                <span class="font-semibold">توربو</span>
                            </span>
                        </label>

                        <!-- Hybrid/Electric -->
                        <label class="flex items-center gap-3 cursor-pointer group">
                            <div class="relative">
                                <input id="is_hybrid_electric" type="checkbox"
                                    class="w-4 h-4  rounded border-slate-300 text-green-600 focus:ring-green-500 focus:ring-offset-0 accent-purple-600">
                                <div
                                    class="absolute inset-0 bg-green-100 rounded opacity-0 group-hover:opacity-20 transition-opacity duration-200">
                                </div>
                            </div>
                            <span class="flex items-center gap-2 font-medium text-slate-700">
                                <span class="font-semibold">هايبرد / كهربائي</span>
                            </span>
                        </label>
                    </div>

                    <!-- Buttons -->
                    <div class="flex flex-col sm:flex-row gap-4 mt-8">
                        <!-- Predict Button -->
                        <button type="submit"
                            class="flex-1 bg-gradient-to-r from-blue-800 to-slate-700 hover:from-blue-900 hover:to-slate-950 text-white py-4 rounded-xl font-bold  flex items-center justify-center gap-3 group">
                            <i class="fas fa-car "></i>
                            <span class="text-lg">توقع السعر</span>
                        </button>

                        <!-- Reset Button -->
                        <button type="button" onclick="resetForm()"
                            class="flex-1 bg-gradient-to-r from-slate-100 to-slate-200 hover:from-slate-200 hover:to-slate-300 text-slate-700 py-4 rounded-xl font-bold transition-all duration-300 border border-slate-300 hover:border-slate-400 flex items-center justify-center gap-3">
                            <i class="fas fa-redo"></i>
                            <span>إعادة تعيين</span>
                        </button>
                    </div>

                </form>
            </section>

            

      <!-- Result -->
      <section class="bg-white rounded-xl border p-6 shadow">
        <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
          النتيجة
        </h2>

        <div id="loading" class="hidden text-center py-10">
          <i class="fas fa-spinner fa-spin text-3xl text-blue-500"></i>
          <p class="mt-3">جاري الحساب...</p>
        </div>

        <div id="predictionResult" class="hidden">
          <div class="bg-slate-100 border-2 border-blue-500 rounded-xl p-6 mb-6">
            <div id="priceValue" class="text-4xl font-bold text-green-700">$0</div>
            <p class="text-slate-600">دولار أمريكي</p>
          </div>
<!-- <div class="space-y-3 text-right bg-blue-50 p-4 rounded-lg">
            <h3 class="font-bold text-slate-700 mb-2">تفاصيل السيارة المدخلة:</h3> -->
             <!-- </div> -->
          <div class="space-y-3 text-right bg-blue-50 p-4 rounded-lg">
            <h3 class="font-bold text-slate-700 mb-2">تفاصيل السيارة المدخلة:</h3>
            <div class="grid grid-cols-2 gap-3">
              <div><strong>الماركة:</strong> <span id="detailBrand" class="text-blue-700"></span></div>
              <div><strong>سنة الصنع:</strong> <span id="detailYear" class="text-blue-700"></span></div>
              <div><strong>المسافة:</strong> <span id="detailMilage" class="text-blue-700"></span></div>
              <div><strong>قوة المحرك:</strong> <span id="detailHp" class="text-blue-700"></span> </div>
              <div><strong>عدد الأسطوانات:</strong> <span id="detailCylinders" class="text-blue-700"></span></div>
              <div><strong>نوع الوقود:</strong> <span id="detailFuel" class="text-blue-700"></span></div>
            </div>
          </div>
        </div>
        <div id="errorMessage" class="hidden bg-red-100 text-red-700 p-4 rounded mt-4 text-center">
          حدث خطأ أثناء التوقع
        </div>
      </section>
    </main>

    <!-- Footer -->
    <!-- <footer class="bg-gradient-to-r from-blue-800 to-slate-800 text-white p-6 text-center">
      © 2025 – تم التطوير بواسطة جنان

    </footer> -->
  </div>

  <!-- ================= JS ================= -->
  <script>
    // const API_URL = "http://127.0.0.1:8000";
    const API_URL = window.location.origin + "/api";

    const form = document.getElementById("carForm");
    const loading = document.getElementById("loading");
    const result = document.getElementById("predictionResult");
    const errorBox = document.getElementById("errorMessage");

    form.addEventListener("submit", async e => {
      e.preventDefault();
      loading.classList.remove("hidden");
      result.classList.add("hidden");
      errorBox.classList.add("hidden");

      // تحويل القيم للأرقام
      const hp = Number(engine_hp.value);
      const year = Number(model_year.value);
      const mil = Number(milage.value);
      const liters = Number(engine_liters.value);

      // التحقق من صحة القيم
      if (isNaN(hp) || hp < 50 || hp > 1500) {
        alert("الرجاء إدخال قيمة قوة المحرك بين 50 و1500 حصان");
        loading.classList.add("hidden");
        return;
      }

      if (isNaN(year) || year < 1990 || year > 2024) {
        alert("الرجاء إدخال سنة تصنيع بين 1990 و2024");
        loading.classList.add("hidden");
        return;
      }

      if (isNaN(mil) || mil < 0) {
        alert("المسافة المقطوعة يجب أن تكون صفر أو أكثر");
        loading.classList.add("hidden");
        return;
      }

      if (isNaN(liters) || liters <= 0) {
        alert("سعة المحرك يجب أن تكون أكبر من صفر");
        loading.classList.add("hidden");
        return;
      }

      // تجهيز البيانات للإرسال
      const data = {
        brand: brand.value,
        model_year: year,
        milage: mil,
        engine_hp: hp,
        cylinders: Number(cylinders.value),
        engine_liters: liters,
        fuel_type: fuel_type.value,
        transmission: transmission.value,
        accident: accident.value,
        has_turbo: has_turbo.checked ? 1 : 0,
        is_hybrid_electric: is_hybrid_electric.checked ? 1 : 0,
      };

      try {
        const res = await fetch(`${API_URL}/predict`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });

        const json = await res.json();
        console.log(data);

        priceValue.textContent = `$${json.predicted_price.toFixed(2)}`;
        // detailBrand.textContent = data.brand;
        // detailYear.textContent = data.model_year;
        // detailMilage.textContent = data.milage + " ميل";
        // detailHp.textContent = data.engine_hp;
        // engine_liters.textContent = data.engine_liters;
        // detailCylinders.textContent = data.cylinders;
        // detailFuel.textContent = data.fuel_type;

        result.classList.remove("hidden");
      } catch (error) {
        console.error("❌ خطأ في الاتصال:", error);
        errorBox.innerHTML = `
        <i class="fas fa-exclamation-triangle"></i>
        <strong>حدث خطأ أثناء التوقع</strong>
        <p class="text-sm mt-1">${error.message || "يرجى التحقق من اتصال الإنترنت وإعادة المحاولة"}</p>
    `;
        errorBox.classList.remove("hidden");
      } finally {
        loading.classList.add("hidden");
      }
    });

    function resetForm() {
      form.reset();
      result.classList.add("hidden");
    }
  </script>


  <style>
    .input {
      @apply border rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-400;
    }
  </style>

</body>

</html>